<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ASCII" />
    <title>CESM CASEROOT env_batch.xml file</title>
    <style type="text/css">
	  body {
          font-family:'Open Sans', Arial, sans-serif;
          font-size:14px;
          font-weight:300;
          line-height:1.6em;
          color:#656565;
          width: 90%;
          align: center;
	  }

	  .container {
          padding: 0 30px 0 30px;
          padding-top: 0px;
          padding-right: 30px;
          padding-bottom: 30px;
          padding-left: 30px;
          position: relative;
	  }
      
	  dt { color:#656565; font-weight: bold }

	  .accordionItem h2 { margin: 0; font-size: 1.1em; padding: 0.4em; color: #000; background-color: #E3E4E6; border-bottom: 1px solid #66d; width: 90%}
	  .accordionItem h2:hover { cursor: pointer; }
	  .accordionItem div { margin: 0; padding: 1em 0.4em; background-color: #eef; border-bottom: 1px solid #66d; width: 90%}
	  .accordionItem.hide h2 { color: #000; background-color: #E3E4E6; width: 90%}
      
	  .detailsBtn { background-color: #E3E4E6; }

	  #variable { color:#66d; font-size: 1.2em; font-weight: bold; display: inline-block; margin-right: 30px; width: 550px; }
	  #emphasis { color:#656565; font-weight: bold; display: inline-block; }
	  #small { color:#9f9f9f; display: inline-block; }

	</style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
	// 
	var accordionItems = new Array();

	function init() {
	  // Grab the accordion items from the page
	  var divs = document.getElementsByTagName( 'div' );
	  for ( var i = 0; i < divs.length; i++ ) {
	    if ( divs[i].className == 'accordionItem' ) accordionItems.push( divs[i] );
	  }
	  // Assign onclick events to the accordion item headings
	  for ( var i = 0; i < accordionItems.length; i++ ) {
	    var h2 = getFirstChildWithTagName( accordionItems[i], 'H2' );
	    h2.onclick = toggleItem;
          }
          // Hide all accordion item bodies 
          for ( var i = 0; i < accordionItems.length; i++ ) {
            accordionItems[i].className = 'accordionItem hide';
            $(accordionItems[i]).find('div').slideUp();
          }
        }

        function toggleItem() {
          var itemClass = this.parentNode.className;
          // Hide all items
          for ( var i = 0; i < accordionItems.length; i++ ) {
            accordionItems[i].className = 'accordionItem hide';
            $(accordionItems[i]).find('div').slideUp();
          }
          // Show this item if it was previously hidden
          if ( itemClass == 'accordionItem hide' ) {
            this.parentNode.className = 'accordionItem';
            $(this).parent().find('div').slideDown();
          }
        }

        function getFirstChildWithTagName( element, tagName ) {
          for ( var i = 0; i < element.childNodes.length; i++ ) {
            if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
          }
        }

        function hideAll() {
        // Hide all accordian items
          for ( var i = 0; i < accordionItems.length; i++ ) {
            accordionItems[i].className = 'accordionItem hide';
            $(accordionItems[i]).find('div').slideUp();
          }
        }

        function showAll() {
        // show all accordian items
          for ( var i = 0; i < accordionItems.length; i++ ) {
            accordionItems[i].className = 'accordionItem hide';
            $(accordionItems[i]).find('div').slideDown();
          }
        }
        //
	</script>
  </head>
  <body onload="init()">
    <div class="container"><h1>CESM CASEROOT env_batch.xml file</h1><p style="font-size: 0.9em;">
	    Model Version: CESM2.0<br />
	    HTML created on: 2017-06-21
	  </p><h3>Description</h3><p>
	    The case.submit script reads these XML env_batch.xml settings in order to<br />
	    determine the machine specific batch job submission arguments to be used for a<br />
	    given job group; <i>case.run</i>, <i>case.test</i>, and <i>case.st_archive</i>.. 
	  </p><h3>Interface Tools</h3><p>
	    CESM2.0 supports 3 job groups; <i>case.run</i>, <i>case.test</i>, and <i>case.st_archive</i>.<br />
	    The <a href="http://www.cesm.ucar.edu/models/cesm2.0/cesm/xmlquery.html">xmlquery</a> 
	    and <a href="http://www.cesm.ucar.edu/models/cesm2.0/cesm/xmlchange.html">xmlchange</a> script tools<br />
	    accept the <b>--subgroup</b> command line argument to define one of the 3 job groups.<br />
	    Batch settings can be modified anytime before case.submit is called.
	  </p><p>
	    Variable names delimited by <pre>{{ }}</pre> are substituted at run-time and should not be modified.
	  </p><h4>Examples</h4><h3>Navigation Instuctions</h3><p>
	  Clicking on the blue link will display additional descriptive information.<br />  
	  Click on the "Show Details" button and then cntl+F key to search for specific strings in this file.
	  </p><button class="detailsBtn" onclick="showAll();">Show Details</button><button class="detailsBtn" onclick="hideAll();">Hide Details</button><br /><br />
  <div class="accordionItem"><h2><span id="variable">File Description Header &lt;header&gt;</span></h2><div><pre>
      These variables may be changed anytime during a run, they
      control arguments to the batch submit command.
    </pre></div></div>
  <div class="accordionItem"><h2>Default Batch Group Settings <span id="variable"><b>&lt;group id="config_batch"&gt; : </b></span></h2><div><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>BATCH_SYSTEM</b></li><li>value = <b>pbs</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b>moab,pbs,lsf,slurm,cobalt,cobalt_theta,none</b></li><li>Description &lt;desc&gt; : <b>The batch system type to use for this machine.</b></li></ul></dd></dl></div></div>
  <div class="accordionItem"><h2>Default Batch System Settings <span id="variable"><b>&lt;batch_system type="pbs"&gt; : </b></span></h2><div><ul><li>Batch Query Command &lt;batch_query&gt; : <b>qstat</b><ul><li> attributes :
	  <ul><li>args = <b>-f</b></li></ul></li></ul></li><li>Batch Submission Command &lt;batch_submit&gt; : <b>qsub </b></li><li>Batch Directive Prefix &lt;batch_directive&gt; : <b>#PBS</b></li><li>Job ID Regular Expression Pattern &lt;jobid_pattern&gt; : <b>^(\S+)$</b></li><li>Job Dependency Command &lt;depend_string&gt; : <b> -W depend=afterok:jobid</b></li><li>Job Walltime Format &lt;walltime_format&gt; : <b>%H:%M:%S</b></li>
    Batch Job Submission Arguments &lt;submit_args&gt; :
    <ul><li>Batch Argument &lt;arg&gt; : 
      <ul><li>Attributes :
	  <ul><li>flag = <b>-q</b></li><li>name = <b>$JOB_QUEUE</b></li></ul></li></ul></li><li>Batch Argument &lt;arg&gt; : 
      <ul><li>Attributes :
	  <ul><li>flag = <b>-l walltime=</b></li><li>name = <b>$JOB_WALLCLOCK_TIME</b></li></ul></li></ul></li><li>Batch Argument &lt;arg&gt; : 
      <ul><li>Attributes :
	  <ul><li>flag = <b>-A</b></li><li>name = <b>$PROJECT</b></li></ul></li></ul></li></ul>
    Batch Job Submission Directives &lt;direcitves&gt; :
    <ul><li>&lt;directive&gt; : <b> -N {{ job_id }}</b><br />
      default=<b></b><br /></li><li>&lt;directive&gt; : <b> -r {{ rerunnable }} </b><br />
      default=<b>n</b><br /></li><li>&lt;directive&gt; : <b> -j oe </b><br />
      default=<b></b><br /></li><li>&lt;directive&gt; : <b> -m {{ mail_options }} </b><br />
      default=<b>ae</b><br /></li><li>&lt;directive&gt; : <b> -V </b><br />
      default=<b></b><br /></li></ul></ul></div></div>
  <div class="accordionItem"><h2>Machine Specific Batch System Settings <span id="variable"><b>&lt;batch_system MACH="cheyenne" type="pbs"&gt; : </b></span></h2><div><ul>
    Batch Job Submission Directives &lt;direcitves&gt; :
    <ul><li>&lt;directive&gt; : <b> -S {{ shell }}  </b><br />
      default=<b>/bin/bash</b><br /></li><li>&lt;directive&gt; : <b> -l select={{ num_nodes }}:ncpus={{ max_tasks_per_node }}:mpiprocs={{ tasks_per_node }}:ompthreads={{ thread_count }}</b><br />
      default=<b></b><br /></li></ul>
    Batch Submission Default Queue Settings &lt;queues&gt; : <br />
    Note: each job group defines their own job submission settings.
    <ul><li>Queue Name &lt;queue&gt; : <b>regular</b><ul><li>Attributes :
	  <ul><li>default = <b>true</b></li><li>jobmax = <b>2592</b></li><li>jobmin = <b>1</b></li><li>walltimemax = <b>1</b></li></ul></li></ul></li></ul></ul></div></div>
  <div class="accordionItem"><h2>Group <i>case.run</i> Settings <b><span id="variable">&lt;group id="case.run"&gt; : </span></b></h2><div><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>prereq</b></li><li>value = <b>$BUILD_COMPLETE and not $TEST</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>task_count</b></li><li>value = <b>default</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>template</b></li><li>value = <b>template.case.run</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>PROJECT_REQUIRED</b></li><li>value = <b>TRUE</b></li></ul></li><li>Data Type &lt;type&gt; : <b>logical</b></li><li>Valid Values &lt;valid_values&gt; : <b>TRUE,FALSE</b></li><li>Description &lt;desc&gt; : <b>whether the PROJECT value is required on this machine</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>PROJECT</b></li><li>value = <b>P93300606</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Description &lt;desc&gt; : <b>project for project-sensitive build and run paths, and job scripts</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>BATCH_COMMAND_FLAGS</b></li><li>value = <b></b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>Override the batch submit command this job. Do not include executable or dependencies</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>JOB_WALLCLOCK_TIME</b></li><li>value = <b>12:00:00</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>The machine wallclock setting.  Default determined in config_machines.xml can be overwritten by testing</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>JOB_QUEUE</b></li><li>value = <b>regular</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>The machine queue in which to submit the job.  Default determined in config_machines.xml can be overwritten by testing</b></li></ul></dd></dl></div></div>
  <div class="accordionItem"><h2>Group <i>case.test</i> Settings <b><span id="variable">&lt;group id="case.test"&gt; : </span></b></h2><div><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>prereq</b></li><li>value = <b>$BUILD_COMPLETE and $TEST</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>task_count</b></li><li>value = <b>default</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>template</b></li><li>value = <b>template.case.test</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>PROJECT_REQUIRED</b></li><li>value = <b>TRUE</b></li></ul></li><li>Data Type &lt;type&gt; : <b>logical</b></li><li>Valid Values &lt;valid_values&gt; : <b>TRUE,FALSE</b></li><li>Description &lt;desc&gt; : <b>whether the PROJECT value is required on this machine</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>PROJECT</b></li><li>value = <b>P93300606</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Description &lt;desc&gt; : <b>project for project-sensitive build and run paths, and job scripts</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>BATCH_COMMAND_FLAGS</b></li><li>value = <b></b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>Override the batch submit command this job. Do not include executable or dependencies</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>JOB_WALLCLOCK_TIME</b></li><li>value = <b>12:00:00</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>The machine wallclock setting.  Default determined in config_machines.xml can be overwritten by testing</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>JOB_QUEUE</b></li><li>value = <b>regular</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>The machine queue in which to submit the job.  Default determined in config_machines.xml can be overwritten by testing</b></li></ul></dd></dl></div></div>
  <div class="accordionItem"><h2>Group <i>case.st_archive</i> Settings <b><span id="variable">&lt;group id="case.st_archive"&gt; : </span></b></h2><div><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>dependency</b></li><li>value = <b>case.run or case.test</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>prereq</b></li><li>value = <b>$DOUT_S</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>task_count</b></li><li>value = <b>1</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>template</b></li><li>value = <b>template.st_archive</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>PROJECT_REQUIRED</b></li><li>value = <b>TRUE</b></li></ul></li><li>Data Type &lt;type&gt; : <b>logical</b></li><li>Valid Values &lt;valid_values&gt; : <b>TRUE,FALSE</b></li><li>Description &lt;desc&gt; : <b>whether the PROJECT value is required on this machine</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>PROJECT</b></li><li>value = <b>P93300606</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Description &lt;desc&gt; : <b>project for project-sensitive build and run paths, and job scripts</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>BATCH_COMMAND_FLAGS</b></li><li>value = <b></b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>Override the batch submit command this job. Do not include executable or dependencies</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>JOB_WALLCLOCK_TIME</b></li><li>value = <b>12:00:00</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>The machine wallclock setting.  Default determined in config_machines.xml can be overwritten by testing</b></li></ul></dd></dl><dl><dt>entry &lt;entry&gt; :</dt><dd><ul><li> attributes :
	    <ul><li>id = <b>JOB_QUEUE</b></li><li>value = <b>regular</b></li></ul></li><li>Data Type &lt;type&gt; : <b>char</b></li><li>Valid Values &lt;valid_values&gt; : <b></b></li><li>Description &lt;desc&gt; : <b>The machine queue in which to submit the job.  Default determined in config_machines.xml can be overwritten by testing</b></li></ul></dd></dl></div></div>
</div>
  </body>
</html>
